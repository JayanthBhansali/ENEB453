<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lab 2 - Form to Table</title>
</head>

<body>
  <h1>Form Submission (Displayed in Table)</h1>

  <!--
    TASKS FOR STUDENTS:
    1) Add CSS styling to improve the UI (layout, spacing, table styling, button styling, etc.)
    2) Add placeholders to inputs
    3) Make fields required
    4) Use correct input types (email, number, date, etc.)
  -->

  <form id="userForm">
    <div>
      <label for="fullName">Full Name:</label>
      <input id="fullName" name="fullName" type="text" />
    </div>

    <div>
      <label for="email">Email:</label>
      <input id="email" name="email" type="text" />
    </div>

    <div>
      <label for="age">Age:</label>
      <input id="age" name="age" type="text" />
    </div>

    <div>
      <label for="department">Department:</label>
      <select id="department" name="department">
        <option value="">-- Select --</option>
        <option value="Data Science">Data Science</option>
        <option value="IoT">IoT</option>
        <option value="Cybersecurity">Cybersecurity</option>
        <option value="Cloud">Cloud</option>
      </select>
    </div>

    <div>
      <label for="message">Message:</label>
      <textarea id="message" name="message" rows="4"></textarea>
    </div>

    <div>
      <button type="submit">Submit</button>
      <button type="reset">Reset</button>
    </div>
  </form>

  <hr />

  <h2>Submitted Entries</h2>

  <table id="submissionsTable" cellpadding="6">
    <thead>
      <tr>
        <th>#</th>
        <th>Full Name</th>
        <th>Email</th>
        <th>Age</th>
        <th>Department</th>
        <th>Message</th>
        <th>Submitted At</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    // This array stores submissions during the session (refresh clears it).
    // Optional student task: Persist using localStorage.
    const submissions = [];

    // Renders all rows in the table
    function renderTable() {
      const tbody = document.querySelector("#submissionsTable tbody");
      tbody.innerHTML = "";

      submissions.forEach((item, index) => {
        const tr = document.createElement("tr");

        const cols = [
          index + 1,
          item.fullName,
          item.email,
          item.age,
          item.department,
          item.message,
          item.submittedAt
        ];

        cols.forEach((value) => {
          const td = document.createElement("td");
          td.textContent = value;
          tr.appendChild(td);
        });

        tbody.appendChild(tr);
      });
    }

    // Handles form submission
    function handleSubmit(event) {
      event.preventDefault();

      const fullName = document.getElementById("fullName").value;
      const email = document.getElementById("email").value;
      const age = document.getElementById("age").value;
      const department = document.getElementById("department").value;
      const message = document.getElementById("message").value;

      const submittedAt = new Date().toLocaleString();

      submissions.push({ fullName, email, age, department, message, submittedAt });

      renderTable();
      event.target.reset();
    }

    document.getElementById("userForm").addEventListener("submit", handleSubmit);
  </script>
</body>
</html>
